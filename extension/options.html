<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>QuickTranslator Options</title>
    <style>
      body { font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif; padding: 16px; }
      .row { margin-bottom: 12px; }
      label { display: block; margin-bottom: 4px; font-weight: 600; }
      select, input[type="text"] { width: 260px; padding: 6px; }
      .hint { color: #666; font-size: 12px; }
      .ok { color: #2a7; margin-left: 8px; }
    </style>
  </head>
  <body>
    <h1>QuickTranslator 设置</h1>

    <div class="row">
      <label for="theme">主题</label>
      <select id="theme">
        <option value="light">亮色</option>
        <option value="dark">暗黑</option>
      </select>
    </div>

    <div class="row">
      <label for="lang">目标语言</label>
      <select id="lang">
        <option value="zh">中文</option>
        <option value="en">英语</option>
        <option value="ja">日语</option>
        <option value="ko">韩语</option>
        <option value="fr">法语</option>
        <option value="es">西班牙语</option>
      </select>
    </div>

    <div class="row">
      <label for="provider">翻译服务</label>
      <select id="provider">
        <option value="mymemory">MyMemory (免费，免密钥)</option>
        <option value="libre">LibreTranslate (公共实例，可能限流)</option>
      </select>
      <div class="hint">如需私有实例，可使用 `libre` 并在后台替换接口。</div>
    </div>

    <button id="save">保存</button><span id="msg" class="ok" style="display:none;">已保存</span>

    <script>
      const els = {
        theme: document.getElementById('theme'),
        lang: document.getElementById('lang'),
        provider: document.getElementById('provider'),
        save: document.getElementById('save'),
        msg: document.getElementById('msg')
      };

      function load() {
        chrome.storage.sync.get({ theme: 'light', targetLang: 'zh', provider: 'mymemory' }, (items) => {
          els.theme.value = items.theme;
          els.lang.value = items.targetLang;
          els.provider.value = items.provider;
        });
      }

      function save() {
        chrome.storage.sync.set({ theme: els.theme.value, targetLang: els.lang.value, provider: els.provider.value }, () => {
          els.msg.style.display = 'inline';
          setTimeout(() => els.msg.style.display = 'none', 1000);
        });
      }

      els.save.addEventListener('click', save);
      load();
    </script>
  </body>
</html>
